<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=0"/>
    <title>WASM UEFIPatch</title>
    <link rel="stylesheet" href="stylesheet.css">
  </head>
  <body onload="init()">
    <div id="file-inputs">
      <h1>WASM UEFIPatch</h1>
      <h2>UEFI firmware patcher</h2>
      <h3>Select your rom files and configure your patches.</h3>
      <h3>Circumvent Secure Boot: Patch out secure boot on AMD AMI firmwares by replacing all EFI_SECURITY_VIOLATION with EFI_SUCCESS in SecurityStubDxe</h3>
      <h3>Uses <a href="https://github.com/LongSoft/UEFITool/blob/old_engine/UEFIPatch/" target="_blank">UEFIPatch</a> under the hood. See <a href="https://github.com/LongSoft/UEFITool/blob/old_engine/UEFIPatch/patches.txt" target="_blank">this</a> for patch format.</h3>
      <h3>A word of warning, since the old UEFIPatch engine is used, it has been known to <a href="https://github.com/LongSoft/UEFITool/issues/192">break</a> some BIOSes. Proceed only if you have recovery method.<h3>
      <input type="file" id="input-rom" accept=".rom">
      <br>
      <div id="patches-selector">
        <!-- Checkbox for disable secure boot. -->
        <div id="preset-patches">
          <input type="checkbox" data-patchname="CSB">Circumvent Secure Boot (only tested on AMD AMI firmwares).</input>
        </div>
        <input type="checkbox" data-patchname="custom">Custom</input>
        <textarea id="custom-patch" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"' data-patchname="custom" placeholder="Enter custom patches here"></textarea>
      </div>
      <h3>Pending patches: The below text will be used as patches.txt.</h3>
      <pre id="patches-txt"></pre>
      <br>
      <button id="run-patch">Patch</button>
      <h3>Output (only updates on completion)</h3>
      <pre id="output"></pre>
    </div>
    <figure style="overflow:visible;">
        <div id="qtstatus"></div>
        <noscript>JavaScript is disabled. Please enable JavaScript + WASM to use this application.</noscript>
    </figure>
    <!-- <canvas id="qtcanvas" oncontextmenu="event.preventDefault()" contenteditable="false"></canvas> -->
    <script src="qt_init.js"></script>
    <script type="text/javascript" src="qtloader_mod.js"></script>
  </body>
</html>
